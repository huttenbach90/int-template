jQuery( document ).ready(function() {
  
	var $sticky = jQuery('.panels');
	var $stickyrStopper = jQuery('footer');
	var asideHeight = jQuery('.scroll-it').height();
	if (!!$sticky.offset()) {
  
	  var generalSidebarHeight = $sticky.innerHeight();
	  var stickyTop = $sticky.offset().top;
	  var stickOffset = 0;
	  var stickyStopperPosition = $stickyrStopper.offset().top;
	  var stopPoint = stickyStopperPosition - generalSidebarHeight - stickOffset;
	  var diff = stopPoint + stickOffset;
  
	  jQuery(window).scroll(function(){ 
			var windowTop = jQuery(window).scrollTop(); 
		
			if (jQuery(window).width() > 992) {
				
				if (stopPoint < windowTop) {
					$sticky.css({ position: 'absolute', top: diff });
					$sticky.removeClass("scrolled");
				} else if (stickyTop < windowTop+stickOffset) {
					$sticky.css({ position: 'fixed', top: stickOffset });
					$sticky.addClass("scrolled");
				} else {
					$sticky.css({position: 'absolute', top: '0'});
					$sticky.removeClass("scrolled");
				}
			}
	  });
  
	}
});